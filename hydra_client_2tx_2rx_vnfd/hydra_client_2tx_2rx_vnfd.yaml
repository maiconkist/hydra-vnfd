vnfd-catalog:
  vnfd:
  - id: hydra_aas_vnfd
    name: hydra_aas_vnfd
    short-name: hydra_aas_vnfd
    description: HyDRA-AAS VNF

    vendor: 5GINFIRE
    version: '1.0'

    # Place the logo as png in icons directory and provide the name here
    logo: 5GinFIRE.png

    # Management interface
    mgmt-interface:
      cp: ens1

    connection-point:
      - name: ens1
        type: VPORT
      - name: ens4
        type: VPORT
      - name: ens5
        type: VPORT
      - name: ens7
        type: VPORT

    # Atleast one VDU need to be specified
    vdu:
    - id: hydra_aas_vnfd-VM
      name: hydra_aas_vnfd-VM
      description: HYDRA VM.
      # Image/checksum or image including the full path
      image: hydra-aas
      count: 1
      guest-epa:
        cpu-pinning-policy: DEDICATED
        cpu-thread-pinning-policy: PREFER
        mempage-size: SMALL
        numa-node-policy:
          mem-policy: STRICT
          node:
          - id: '1'
          node-cnt: '1'
      # Flavour of the VM to be instantiated for the VDU
      # flavor below can fit into m1.micro
      vm-flavor:
        memory-mb: 4096
        storage-gb: 20
        vcpu-count: 1
      interface:
      - external-connection-point-ref: ens1
        name: ens1
        position: '1'
        type: EXTERNAL
        virtual-interface:
          bandwidth: '0'
          type: VIRTIO
          vpci: 0000:00:0a.0
      - external-connection-point-ref: ens4
        name: ens4
        position: '1'
        type: EXTERNAL
        virtual-interface:
          bandwidth: '0'
          type: VIRTIO
          vpci: 0000:00:0a.0
      - external-connection-point-ref: ens5
        name: ens5
        position: '1'
        type: EXTERNAL
        virtual-interface:
          bandwidth: '0'
          type: VIRTIO
          vpci: 0000:00:0a.0
      - external-connection-point-ref: ens7
        name: ens7
        position: '2'
        type: EXTERNAL
        virtual-interface:
          type: SR-IOV

    # Uncomment and update below to enable juju
    # charm configuration for the VNF
    vnf-configuration:
        juju:
            charm: ansible-charm-v2
        service-primitive:
        -   name: config
            parameter:
            -   name: ssh-hostname
                data-type: STRING
                mandatory: false
                default-value: <rw_mgmt_ip>
            -   name: ssh-username
                data-type: STRING
                mandatory: false
                default-value: ubuntu
            -   name: ssh-password
                data-type: STRING
                mandatory: false
                default-value: ubuntu
            -   name: ssh-private-key
                data-type: STRING
                mandatory: false
        -   name: ansible-playbook
        initial-config-primitive:
        -   name: config
            parameter:
            -   name: ssh-hostname
                value: <rw_mgmt_ip>
            -   name: ssh-username
                value: ubuntu
            -   name: ssh-password
                value: ubuntu
            seq: '1'
        #-   name: start
        #    seq: '2'
        #-   name: ansible-playbook
        #    seq: '2'
